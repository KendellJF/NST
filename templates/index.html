<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>üéâ No Soca Tonight </title>
	<link rel="stylesheet" href="/static/styles.css">
	<style>
		* { margin: 0; padding: 0; box-sizing: border-box; }
		
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #1a0000 0%, #330000 25%, #1a0000 50%, #4d0000 75%, #1a0000 100%);
			background-size: 400% 400%;
			animation: gradientShift 8s ease infinite;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #fff;
		}

		@keyframes gradientShift {
			0% { background-position: 0% 50%; }
			50% { background-position: 100% 50%; }
			100% { background-position: 0% 50%; }
		}

		@keyframes pulse-glow {
			0%, 100% { text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000; }
			50% { text-shadow: 0 0 20px #ff0000, 0 0 40px #ff0000, 0 0 60px #cc0000; }
		}

		.container {
			max-width: 500px;
			width: 90%;
		}

		.card {
			background: rgba(20, 0, 0, 0.9);
			backdrop-filter: blur(10px);
			border: 2px solid #ff0000;
			border-radius: 20px;
			padding: 40px;
			box-shadow: 0 0 30px rgba(255, 0, 0, 0.3), 0 0 60px rgba(200, 0, 0, 0.2);
			animation: cardPulse 3s ease-in-out infinite;
		}

		@keyframes cardPulse {
			0%, 100% { box-shadow: 0 0 30px rgba(255, 0, 0, 0.3), 0 0 60px rgba(200, 0, 0, 0.2); }
			50% { box-shadow: 0 0 40px rgba(255, 0, 0, 0.5), 0 0 80px rgba(200, 0, 0, 0.4); }
		}

		h1 {
			text-align: center;
			font-size: 2.5em;
			margin-bottom: 10px;
			animation: pulse-glow 2s ease-in-out infinite;
		}

		.subtitle {
			text-align: center;
			color: #ff0000;
			margin-bottom: 30px;
			font-size: 0.95em;
			letter-spacing: 2px;
		}

		form {
			display: flex;
			flex-direction: column;
		}

		label {
			display: block;
			margin: 15px 0 5px 0;
			font-weight: 600;
			color: #ff0000;
			font-size: 0.95em;
			letter-spacing: 1px;
		}

		input {
			background: rgba(255, 0, 0, 0.1);
			border: 2px solid #ff0000;
			color: #fff;
			padding: 12px 15px;
			border-radius: 10px;
			font-size: 1em;
			margin-bottom: 15px;
			transition: all 0.3s ease;
		}

		input:focus {
			outline: none;
			background: rgba(255, 0, 0, 0.2);
			box-shadow: 0 0 15px rgba(255, 0, 0, 0.5), 0 0 30px rgba(200, 0, 0, 0.3);
			border-color: #ff0000;
		}

		input::placeholder {
			color: rgba(255, 0, 0, 0.6);
		}

		.button-group {
			display: flex;
			justify-content: center;
			margin-top: 20px;
		}

		button {
			flex: 1;
			padding: 12px 20px;
			font-size: 1em;
			font-weight: 600;
			border: 2px solid #ff0000;
			border-radius: 10px;
			cursor: pointer;
			transition: all 0.3s ease;
			letter-spacing: 1px;
			max-width: 250px;
		}

		button[type="submit"] {
			background: linear-gradient(135deg, #ff0000, #cc0000);
			color: #fff;
		}

		button[type="submit"]:hover {
			background: linear-gradient(135deg, #cc0000, #ff0000);
			box-shadow: 0 0 20px rgba(255, 0, 0, 0.6), 0 0 40px rgba(200, 0, 0, 0.3);
			transform: translateY(-2px);
		}

		button[type="button"] {
			background: transparent;
			color: #ff0000;
		}

		button[type="button"]:hover {
			background: rgba(255, 0, 0, 0.1);
			box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
		}

		#result {
			margin-top: 15px;
			padding: 15px 20px;
			border-radius: 12px;
			text-align: center;
			font-weight: 600;
			min-height: 24px;
			font-size: 1.1em;
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 1000;
			display: none;
			box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
		}

		#result:not(:empty) {
			display: block;
		}

		#result.success {
			background: rgba(255, 0, 0, 0.2);
			color: #ff0000;
			border: 1px solid #ff0000;
		}

		#result.error {
			background: rgba(255, 0, 0, 0.2);
			color: #ff0000;
			border: 1px solid #ff0000;
		}

		.info-text {
			text-align: center;
			margin-top: 20px;
			font-size: 0.85em;
			color: #ff0000;
			opacity: 0.8;
		}

		.emoji {
			display: inline-block;
			font-size: 1.5em;
			margin: 0 5px;
			animation: bounce 2s ease-in-out infinite;
		}

		@keyframes bounce {
			0%, 100% { transform: translateY(0); }
			50% { transform: translateY(-10px); }
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="card">
			<h1>üéâ No Soca Tonight üéâ</h1>
			<p class="subtitle">‚ú® Join the NST Giveaway ‚ú®</p>
			
			<form id="checkin">
				<label for="fname">First Name</label>
				<input type="text" name="fname" id="fname" placeholder="Your first name" required autofocus>
				
				<label for="lname">Last Name</label>
				<input type="text" name="lname" id="lname" placeholder="Your last name" required>
				
				<label for="instagram_handle">Instagram Handle</label>
				<input type="text" name="instagram_handle" id="instagram_handle" placeholder="@your_handle" required>

				<div class="button-group">
					<button type="submit">üéä CHECK IN üéä</button>
				</div>
			</form>

			<div id="result" aria-live="polite"></div>
			<p class="info-text">Enter your details to be entered into the giveaway! <span class="emoji">üéÅ</span></p>
		</div>
	</div>

	<script>
		function normalize(h){ if(!h) return ''; h = h.trim(); if(h.startsWith('@')) h = h.slice(1); return h.toLowerCase(); }

		document.getElementById('checkin').addEventListener('submit', async function(e){
			e.preventDefault();
			const form = e.target;
			const fname = form.fname.value.trim();
			const lname = form.lname.value.trim();
			const handle = normalize(form.instagram_handle.value);
			if(!fname || !lname || !handle){ 
				showResult('All fields required! üëÜ', 'error');
				return; 
			}

			const payload = { fname, lname, instagram_handle: handle };

			try{
				const res = await fetch('/submit', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
				const js = await res.json().catch(()=>({}));
				if(res.status >= 200 && res.status < 300){
					showResult('‚úÖ You\'re in! Good luck! üçÄ', 'success');
					document.getElementById('checkin').style.opacity = '0.2';
					document.getElementById('checkin').style.pointerEvents = 'none';
					form.reset();
					setTimeout(() => { 
						showResult('');
						document.getElementById('checkin').style.opacity = '1';
						document.getElementById('checkin').style.pointerEvents = 'auto';
					}, 4000);
				} else {
					showResult(js.error || ('Error: ' + res.status), 'error');
				}
			}catch(err){ showResult('Network error üòû', 'error'); }
		});

		function showResult(msg, type) {
			const el = document.getElementById('result');
			el.textContent = msg;
			el.className = type;
		}
	</script>
</body>
</html>
